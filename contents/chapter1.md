# 챕터 1

## 스파인-리프 구조

가상화 기술과 높은 대역폭을 요구하는 스케일 아웃 기반의 애플리케이션과 서비스가 등장하면서 **스파인-리프(Spine-Leaf)** 구조로 변화하였다.

서버는 10G Base-T 이더넷 포트가 제공되어 **TOR(Top of Rack)** 스위치에 연결하고, 리프 스위치인 TOR 스위치는 스파인 스위치와 40G, 100G로 연결한다.

## 프로토콜

TCP/IP는 **프로토콜 스택**이라 불리는데, 이는 TCP와 IP가 별도 계층에서 동작하는 프로토콜이기 때문이다. 함께 사용하고 있기 때문에 프로토콜 스택이라 부른다.

## OSI 7계층

각 계층별로 PDU(Protocol Data Unit)은 다음과 같다.

|계층                |데이터 |
|-----               |------|
|응용(애플리케이션)  |Data   |
|표현(프레젠테이션)  |Data   |
|세션                |Data   |
|전송(트랜스포트)    |Segments|
|네트워크            |Packets|
|데이터 링크         |Frames|
|물리(피지컬)        |Bits   |

## TCP/IP 프로토콜 스택

TCP/IP 모델은 OSI 모델과 다음과 같이 대응된다.

|TCP/IP 모델|OSI 모델|
|-          |      -|
|애플리케이션 계층  |상위 3개 계층  |
|트랜스포트 계층    |트랜스포트 계층    |
|인터넷             |네트워크 계층  |
|네트워크 액세스    |하위 2개 계층  |

## 캡슐화

각 계층의 PDU는 상위 데이터와 자기 계층의 정보를 포함한다.

- 4계층 세그먼트: 4계층 헤더 + 상위 데이터
- 3계층 패킷: 3계층 헤더 + 세그먼트
- 2계층 Frame: 2계층 헤더 + 패킷 + FCS(Frame Check Sequence, 오류 검사 필드)
- 1계층 Bit: Bit로 변환

헤더에는 두 가지 정보가 반드시 포함된다.

1. 현재 계층에서 정의하는 정보
2. 상위 프로토콜 지시자

상위 프로토콜 지시자는 IP, TCP와 UDP, HTTP FTP SMTP 등 어떤 상위 프로토콜로 해석할 지 결정하는 역할을 한다.

### MSS & MTU
- MSS (Maximum Segment Size): 세그멘트 내용에 담을 수 있는 크기, 이더넷은 1460 바이트
- MTU (Maximum Transmission Unit): 네트워크에서 한 번에 보낼 수 있는 크기, 이더넷은 1500 바이트

3, 4 계층 헤더가 각각 20 바이트
